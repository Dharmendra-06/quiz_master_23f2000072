{% extends 'user_layout.html' %}

{% block title %}
    User Dashboard
{% endblock %}

{% block style %}
<style>
/* General Styling */
body {
    background-color: #eef1f6;
}

/* Sidebar */
.sidebar {
    height: 100vh;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    padding-top: 20px;
    transition: all 0.3s;
}
.sidebar h4 {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 20px;
}
.sidebar a {
    color: white;
    text-decoration: none;
    padding: 12px 20px;
    display: block;
    border-radius: 5px;
    font-weight: 500;
    transition: 0.3s ease-in-out;
}
.sidebar a:hover {
    background: #0056b3;
    transform: translateX(5px);
}

/* Main Content */
.content {
    padding: 30px;
}

/* Dashboard Cards */
.card {
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    transition: 0.3s;
}
.card:hover {
    transform: scale(1.05);
}
.card h5 {
    font-weight: 600;
    color: #333;
}

/* Quiz Table */
.dashboard-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.1);
    padding: 20px;
}
.status-badge {
    font-size: 14px;
    padding: 8px 12px;
    border-radius: 20px;
}
.btn-start {
    background-color: #28a745;
    border: none;
    border-radius: 20px;
    padding: 6px 15px;
    font-weight: 500;
}
.btn-start:hover {
    background-color: #218838;
}
</style>
{% endblock %}

{% block content %}
<!-- Main Content -->
<main class="col-md-9 ms-sm-auto col-lg-10 content">
    <h2 class="mb-4">Welcome, User</h2>
    <div class="row">
        <div class="col-md-4">
            <div class="card text-center p-4">
                <h5>Completed Quizzes</h5> <!-- Completed Quizzes -->
                <h3>{{ completed_quizzes }}</h3> <!-- Completed Quizzes -->
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-4">
                <h5>Pending Quizzes</h5> <!-- Pending Quizzes -->
                <h3>{{ pending_quizzes }}</h3> <!-- Pending Quizzes -->
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center p-4">
                <h5>Average Score</h5> <!-- Average Score -->

                <h3>{{ average_score }}%</h3> <!-- Average Score -->
            </div>
        </div>
    </div>

    <!-- Available Quizzes -->
    <div class="dashboard-card mt-4">
        <h4 class="mb-3">Available Quizzes</h4>
        <table class="table table-hover table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Quiz Title</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for quiz in quizzes %}
                <tr>
                    <td>{{ quiz.id }}</td>
                    <td>{{ quiz.title }}</td>
                    <td>
                        {% if quiz.id in completed_quizzes %}
                            <span class="badge bg-success status-badge">Completed</span>
                        {% else %}
                            <span class="badge bg-warning status-badge">Pending</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if quiz.id in completed_quizzes %}
                            âœ”
                        {% else %}
                            <a href="{{ url_for('attempt_quiz', quiz_id=quiz.id) }}" class="btn btn-start btn-sm">Start Quiz</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</main>
{% endblock %}